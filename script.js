// Playlist dictionary


const playlist = {
    "Booraye - Ian Clarke": "booraye_ian_clarke",
    "After the Fall - Two Steps From Hell": "After_the_Fall_Two_Steps_From_Hell",
    "Archangel - Two Steps From Hell": "Archangel_Two_Steps_From_Hell",
    "Birth of a Hero - Two Steps From Hell": "Birth_of_a_Hero_Two_Steps_From_Hell",
    "Blackheart - Two Steps From Hell": "Blackheart_Two_Steps_From_Hell",
    "Colors of Love - Two Steps From Hell": "Colors_of_Love_Two_Steps_From_Hell",
    "Compass - Two Steps From Hell": "Compass_Two_Steps_From_Hell",
    "El Dorado - Two Steps From Hell":"El_Dorado_Two_Steps_From_Hell",
    "Empire of Angels - Two Steps From Hell": "Empire_of_Angels_Two_Steps_From_Hell",
    "Flight of the Silverbird - Two Steps From Hell":"Flight_of_the_Silverbird_Two_Steps_From_Hell",
    "For the Win - Two Steps From Hell": "For_the_Win_Two_Steps_From_Hell",
    "Freedom Fighters - Two Steps From Hell": "Freedom_Fighters_Two_Steps_From_Hell",
    "Immortal - Two Steps From Hell": "Immortal_Two_Steps_From_Hell",
    "Impossible - Two Steps From Hell": "Impossible_Two_Steps_From_Hell",
    "Never Back Down - Two Steps From Hell":"Never_Back_Down_Two_Steps_From_Hell",
    "Pegasus - Two Steps From Hell": "Pegasus_Two_Steps_From_Hell",
    "Protectors of the Earth - Two Steps From Hell":"Protectors_of_the_Earth_Two_Steps_From_Hell",
    "Stallion - Two Steps From Hell":"Stallion_Two_Steps_From_Hell",
    "Star Sky - Two Steps From Hell": "Star_Sky_Two_Steps_From_Hell",
    "Strength of a Thousand Men - Two Steps From Hell": "Strength_of_a_Thousand_Men_Two_Steps_From_Hell",
    "To Glory - Two Steps From Hell": "To_Glory_Two_Steps_From_Hell",
    "Victory - Two Steps From Hell":"Victory_Two_Steps_From_Hell",
    "Rohan Theme - Lord of the Rings (LOTR)": "Rohan_Theme_LOTR",
    "Rohan Rohirrim Soundtrack - LOTR": "Rohan_Rohirrim_Soundtrack_LOTR",
    "Unravel Remix - Tokyo Ghoul (Samuel Kim)": "Unravel_Tokyo_Ghoul",
    "Kai's Theme - Kung Fu Panda (Samuel Kim)": "Kai_Theme_Kung_Fu_Panda",
    "Rengoku Theme - Demon Slayer (Samuel Kim)": "Rengoku_Theme_Demon_Slayer",
    "Inosuke Theme V2 - Demon Slayer (Samuel Kim)": "Inosuke_Theme_V2_Demon_Slayer",
    "Gurenge - Demon Slayer (Samuel Kim)": "Gurenge_Demon_Slayer",
    "Tokyo Revengers Main Theme (Samuel Kim)": "Tokyo_Revengers_Main_Theme",
    "The Battle for Me Myself - Tokyo Revengers": "The_Battle_for_Me_Myself_Tokyo_Revengers",
    "Our Dream - Tokyo Revengers": "Our_Dream_Tokyo_Revengers",
    "Call of Silence (Lofi)- Attack on Titan": "Call_of_Silence_Attack_on_Titan",
    "My Soul - July": "My_Soul_July",
    "Somewhere - July": "Somewhere_July",
    "逆时针向 - Asphyxia":"逆时针向_Asphyxia",
    "Bloody Mary - Instrumental": "Bloody_Mary_Instrumental",
    "Fake Love Orchestral - BTS": "Fake_Love_Orchestral_BTS",
    "浮光 - Music": "浮光_Music",
    "天耀中华 (伴奏) - 徐千雅":"天耀中华_伴奏_徐千雅",
    "黑色裂變 - 大秦帝國": "黑色裂變_大秦帝國",
    "琅琊榜 - 主题音乐": "琅琊榜_主题音乐",
    "中國軍魂 - Music": "中國軍魂",
    "最后的审判 - 琅琊榜": "最后的审判_琅琊榜",
    "高進 - 聽著情歌流眼淚": "聽著情歌流眼淚_高進",
    "百鸟归巢 - 谭维维":"百鸟归巢_谭维维",
    "歷史的天空 - 三國演義": "歷史的天空_三國演義",
    "主題曲 - 大俠霍元甲":"主題曲_大俠霍元甲",
    "红日 - 李克勤": "红日_李克勤",
    "刀劍如夢 - 周華健": "刀劍如夢_周華健",
    "神话情话 - 周华健, 齐豫 ": "神话情话_周华健_齐豫 ",
    "诉衷情 - 伪装者":"诉衷情_伪装者",
    "等待 - 韩磊":"等待_韩磊",
    "海闊天空 - Beyond": "海闊天空_Beyond",
    "一生有意义 - 射雕英雄传之东邪西毒": "一生有意义_射雕英雄传之东邪西毒",
    "鐵血丹心 - 射鵰英雄傳": "鐵血丹心_射鵰英雄傳",
    "留下我美夢 - TVB 甄妮" : "留下我美夢_甄妮",
    "一生所愛 - 大话西游":"一生所愛_大话西游",
    "天命最高 - 古天乐 (寻秦记主题曲)": "天命最高_古天乐",
    "天下 - 大秦賦": "天下_大秦賦",
    "珍惜 - 李宇春": "珍惜_李宇春",
    "忘川 - 小曲兒 (曲終人未散)": "忘川_小曲兒",
    "终于等到你 - 张靓颖": "终于等到你_张靓颖",
    "绝唱 - 生死谍恋": "绝唱_生死谍恋",
    "假如爱有天意 - 李健":"假如爱有天意_李健",
    "楊花李樹 - 孫楠": "楊花李樹_孫楠",
    "美麗的神話 - 胡歌": "美麗的神話_胡歌",
    "我的血液 - 杨门虎将": "我的血液_杨门虎将",
    "玄鸟 - Till the End of the Moon OST": "玄鸟_Till_the_End_of_the Moon_OST",
    "我的心下起了雪 - 王忻辰": "我的心下起了雪_王忻辰",
    "櫻花樹下的約定 - 旺仔小喬": "櫻花樹下的約定_旺仔小喬",
    "天下 - 張杰": "天下_張杰",
    "起風了 - 買辣椒也用券": "起風了_買辣椒也用券",
    "笼 - 张碧晨": "笼_张碧晨",
    "獨角戲 - 許茹芸": "許茹芸_獨角戲",
    "归途有风 - 王菲": "归途有风_王菲",
    "飛鳥和蟬 - 任然": "飛鳥和蟬_任然",
    "葬仙 - 葉里 & 苑舍":"葬仙_葉里_苑舍",
    "最美的瞬间": "最美的瞬间",
    "旧梦一场 - 阿悠悠":"旧梦一场_阿悠悠",
    "你能不能不要离开我 - 莫叫语": "你能不能不要离开我_莫叫语",
    "桃花诺 - 邓紫棋": "桃花诺_邓紫棋",
    "明月天涯 - 五音Jw": "明月天涯_五音Jw",
    "阴霾 - 高旭": "阴霾_高旭",
    "美人魚 - 林俊杰": "美人魚_林俊杰",
    "雲與海 - 阿YueYue": "雲與海_阿YueYue",
    "夏夜灯塔 - 沈以诚": "夏夜灯塔_沈以诚",
    "Heaven - Ailee": "heaven_ailee",
    "Orbit - HWASA": "Orbit_HWASA",
    "monogram - Lucid Dream": "monogram_Lucid_Dream",
    "Once Again - Mad Clown & Kim Nayoung": "Once_Again_Mad_Clown",
    "Done For Me - Punch Hotel Del Luna OST": "Done_For_Me",
    "This Love - DAVICHI": "This_Love_DAVICHI",
    "Everytime - CHEN & Punch": "Everytime_CHEN_Punch",
    "Love Attack - Rescene": "Love_Attack_Rescene",
    "Fall In Love Again - TWICE": "Fall_In_Love_Again_TWICE",
    "Mago - GFRIEND": "Mago_GFRIEND",
    "Mise-en-Scène - IZ*ONE": "Mise_en_Scène_IZ*ONE",
    "O Sole Mio - IZ*ONE": "O_Sole_Mio_IZ*ONE",
    "Island - IZ*ONE":"Island_IZ*ONE",
    "해바라기 Hey. Bae. Like It. - IZ*ONE": "Hey_Bae_Like_It_IZ*ONE",
    "First Love (첫사랑) - After School":"First_Love_After_School",
    "Siren - Sunmi": "Siren_Sunmi",
    "Rollercoaster - Chungha": "Rollercoaster_Chungha",
    "Bon Voyage - YooA":"Bon_Voyage_YooA",
    "Virtual Angel - ARTMS": "Virtual_Angel_ARTMS",
    "Girls Never Die - tripleS": "Girls_Never_Die_tripleS",
    "Rooftop - N.Flying": "Rooftop_NFlying",
    "LUNA - ONEUS": "LUNA_ONEUS",
    "Valkyrie (발키리) - ONEUS":"Valkyrie_ONEUS",
    "To Be Or Not To Be - ONEUS":"To_Be_Or_Not_To_Be_ONEUS",
    "A Song Written Easily - ONEUS":"A_Song_Written_Easily_ONEUS",
    "Deja Vu - TOMORROW X TOGETHER": "Deja_Vu_TOMORROW_X_TOGETHER",
    "LO$ER=LO♡ER - TOMORROW X TOGETHER": "Loser_Lover_TOMORROW_X_TOGETHER",
    "Chasing That Feeling - TOMORROW X TOGETHER": "Chasing_That_Feeling_TOMORROW_X_TOGETHER",
    "FLASH - X1": "FLASH_X1",
    "Fatal Trouble - ENHYPEN":"Fatal_Trouble_ENHYPEN",
    "Answer - ATEEZ": "Answer_ATEEZ",
    "Inception - ATEEZ": "Inception_ATEEZ",
    "Say My Name - ATEEZ": "Say_My_Name_ATEEZ",
    "Hotaru - Fujita Maiko": "Hotaru_Fujita_Maiko",
    "Blue Bird - Naruto": "Blue_Bird_Naruto",
    "藍悼花 - 酔シグレ": "藍悼花_酔シグレ",
    "悪魔の子 (Rock Remix) - Attack on Titan": "悪魔の子_Attack_on_Titan",
    "夢と葉桜 - 青木月光": "夢と葉桜",
    "さくらひらり - Tomo":"さくらひらり_Tomo",
    "The Final Countdown Remix- Europe": "The_Final_Countdown_Remix_Europe",
    "I'll Do It - Heidi Montag": "Ill_Do_It_Heidi_Montag",
    "Håll Om Mig - Nanne Grönvall":  "Hall_Om_Mig_Nanne_Gronvall",
    "I'm Good (Blue)- Bebe Rexha & David Guetta": "Im_Good_Bebe_Rexha_David_Guetta",
    "DYNASTY x FICTION - Remix":"DYNASTY_x_FICTION_Remix",
    "Mimimi - Dramma":"Mimimi_Dramma",
    "DaDaDa (Да да да)- Jarico":"DaDaDa_Jarico",
    "Take Me To Church - Hozier (Female Version)":"Take_Me_To_Church_Hozier_Female",
    "Around The World (La La La) - ATC":"Around_The_World_LaLaLa_ATC",
    "Nevada - Vicetone": "Nevada_Vicetone",
    "Monody - TheFatRat": "Monody_TheFatRat",
    "Numb -  Linkin Park (Remix)": "Numb_Remix",
    "Take Me Hand - Daishi Dance": "Take_Me_Hand_Daishi_Dance",
    "印第安曲": "印第安曲",
    "迴夢遊仙 (Music)": "迴夢遊仙",
    "That Girl x Talking To The Moon Remix": "That_Girl_x_Talking_To_The_Moon"
};
console.log(Object.keys(playlist).length);

let currentSongIndex = 0;  // Keeps track of the song position in the playlist

// Get references to the audio player and the song select dropdown
const audioPlayer = document.getElementById('audioPlayer');
const audioSource = document.getElementById('audioSource');
const albumArt = document.getElementById('albumArt');
const songSelect = document.getElementById('songSelect');
const playPauseButton = document.getElementById('playPauseButton');

// Function to populate the playlist
function populatePlaylist() {
    const container = document.getElementById('container-playlist');
    const dropdown = document.getElementById('songSelect');
    
    container.innerHTML = '';  // Clear previous songs
    dropdown.innerHTML = '';   // Clear dropdown options

    // Loop through the playlist object to create song items
    for (const title in playlist) {
        if (playlist.hasOwnProperty(title)) {
            // Create div for scrollable playlist
            const songDiv = document.createElement('div');
            songDiv.classList.add('song-item');
            songDiv.textContent = title;

            // Add click event to play the song
            songDiv.addEventListener('click', function() {
                currentSongIndex = Object.keys(playlist).indexOf(title);  // Update the index based on clicked song
                playSong(title);  // Play the selected song
            });

            container.appendChild(songDiv);

            // Create an option for the dropdown
            const option = document.createElement('option');
            option.textContent = title;
            option.value = title;
            dropdown.appendChild(option);
        }
    }
}

// Function to play the song
function playSong(title) {
    const filename = playlist[title];
    
    // Update the audio source and album art
    audioSource.src = `music/${filename}.mp3`;  // Assuming the music is stored in the 'music' folder
    albumArt.src = `albumArt/${filename}.png`;  // Assuming album art is in the 'albumArt' folder

    audioPlayer.load();  // Load the new song
    audioPlayer.play();  // Play the new song

    // Optionally update any other UI elements if needed
    console.log(`Playing: ${title} (Song Index: ${currentSongIndex})`);


    // Remove "<--" and bold styling from any previously highlighted song in the playlist
    const playlistItems = document.querySelectorAll('.song-item');
    playlistItems.forEach((item) => {
        item.classList.remove('playing'); // Remove bold styling class
        item.textContent = item.textContent.replace(" <--", ""); // Remove previous indicator
    });

    // Add "<--" and bold styling to the currently playing song in the playlist
    const currentItem = playlistItems[currentSongIndex];
    
    console.log(currentItem.textContent);
    document.getElementById('selected-song').innerText = currentItem.textContent;
    currentItem.textContent += " <--";
    currentItem.classList.add('playing');  // Apply bold styling class


    
    // Update the dropdown to reflect the song change
    songSelect.value = title;
    updatePlayPauseButton();  // Update the play/pause button state
}

// Function to update the play/pause button based on the audio state
function updatePlayPauseButton() {
    if (audioPlayer.paused) {
        playPauseButton.innerHTML = '<i class="fa fa-play"></i>'; // Set play icon and text
    } else {
        playPauseButton.innerHTML = '<i class="fa fa-pause"></i>'; // Set pause icon and text
    }
}

// Function to toggle play/pause when the button is clicked
function togglePlayPause() {
    if (audioPlayer.paused) {
        audioPlayer.play();
    } else {
        audioPlayer.pause();
    }

    updatePlayPauseButton();
}

// Function to play the next song in the playlist
function playNextSong() {
    const titles = Object.keys(playlist);
    currentSongIndex = (currentSongIndex + 1) % titles.length;  // Increment index and wrap around if at the end
    playSong(titles[currentSongIndex]);  // Play the next song
}

// Event listener for when the song ends
audioPlayer.addEventListener('ended', playNextSong);

// Event listener for the play/pause button
playPauseButton.addEventListener('click', togglePlayPause);

// Event listener for dropdown song change
songSelect.addEventListener('change', function() {
    const selectedTitle = songSelect.value;
    currentSongIndex = Object.keys(playlist).indexOf(selectedTitle);  // Update index based on selection
    playSong(selectedTitle);  // Play the selected song
});

// Initialize playlist and button state
populatePlaylist();
updatePlayPauseButton();









function toggleTheme() {
    // Get the checkbox input
    const checkbox = document.querySelector('input[type="checkbox"]');
    
    // Check if the checkbox is checked
    if (checkbox.checked) {
        // Add the 'dark-mode' class to the body
        document.body.classList.add('dark-mode');
    } else {
        // Remove the 'dark-mode' class from the body
        document.body.classList.remove('dark-mode');
    }
}

